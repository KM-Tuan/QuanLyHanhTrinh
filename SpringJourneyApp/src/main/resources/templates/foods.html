<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
    <div th:replace="base :: title"></div>
    <block th:replace="base :: styles"></block>
    <style>
        body, html {
            margin:0;
            padding:0;
            font-family: Arial;
            background:#1c1c1c;
            color:white;
        }
        .table-container {
            margin:50px auto;
            padding:30px;
            background:rgba(19,16,16,0.85);
            border-radius:12px;
            width:80%;
        }
        table {
            width:100%;
            border-collapse:collapse;
        }
        th, td {
            padding:12px;
            text-align:center;
            border:1px solid #444;
        }
        th {
            background-color: rgba(42,42,42,0.85);
        }
        tr:hover {
            background-color: rgba(51,51,51,0.85);
        }
        .pagination {
            margin-top: 20px;
            text-align: center; /* căn giữa container */
            display: flex;
            justify-content: center; /* căn giữa tất cả các link */
            flex-wrap: wrap; /* nếu quá nhiều trang, xuống hàng */
            gap: 5px; /* khoảng cách giữa các số */
        }

        .pagination a {
            padding: 6px 12px;
            background: #28a745;
            color: white;
            border-radius: 4px;
            text-decoration: none;
            display: inline-block; /* đảm bảo các link hiển thị ngang hàng */
        }

        .pagination a.active {
            background: #007bff;
        }
        .btn-add {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div th:replace="base :: header"></div>

    <div class="content-wrapper">
        <div class="table-container">
            <h1 style="text-align:center;">DANH SÁCH MÓN ĂN</h1>

            <!-- Nút thêm mới -->
            <div style="text-align:right;">
                <a th:href="@{/addChoice}" class="btn-add">
                    <i class="fas fa-plus-circle"></i> Thêm mới
                </a>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Tên</th>
                        <th>Giá</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="f : ${foods}">
                        <td th:text="${f.id}"></td>
                        <td th:text="${f.name}"></td>
                        <td th:text="${f.price} + ' VNĐ'"></td>
                        <td>
                            <a th:href="@{/foods/add/{id}(id=${f.id})}" class="btn btn-sm btn-primary">
                                <i class="fa fa-edit"></i>
                            </a>
                            <a th:href="@{/foods/delete/{id}(id=${f.id})}"
                               class="btn btn-sm btn-danger"
                               onclick="return confirm('Bạn có chắc chắn muốn xóa món này?');">
                                <i class="fa fa-trash"></i>
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Pagination -->
            <div class="pagination">
                <a th:if="${currentPage > 0}"
                   th:href="@{/foods(page=${currentPage - 1}, size=${size})}">« Trước</a>

                <span th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
                    <a th:href="@{/foods(page=${i}, size=${size})}"
                       th:text="${i + 1}"
                       th:classappend="${i == currentPage} ? 'active' : ''"></a>
                </span>

                <a th:if="${currentPage + 1 < totalPages}"
                   th:href="@{/foods(page=${currentPage + 1}, size=${size})}">Sau »</a>
            </div>

        </div>
    </div>

    <div th:replace="base :: footer"></div>
</body>
</html>
